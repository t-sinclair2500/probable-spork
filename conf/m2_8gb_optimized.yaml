# conf/m2_8gb_optimized.yaml
# Mac M2 8GB optimized profile
# Higher concurrency, faster pacing, VideoToolbox encoding

platform:
  target: "mac_m2_8gb"
  description: "Apple Silicon M2 with 8GB RAM - local-first pipeline optimized"

performance:
  max_concurrent_renders: 2
  pacing_cooldown_seconds: 15
  encode:
    delivery_crf: 19
    pix_fmt: "yuv420p"
    # VideoToolbox acceleration available on macOS
    use_videotoolbox: true

llm:
  defaults:
    # Keep 3B reliable; allow opt-in larger model for scriptwriting
    chat_model: "llama3.2:3b"
    generate_model: "llama3.2:3b"
  options:
    num_ctx: 4096
    num_predict: 640
    temperature: 0.4
    seed: 1337
  scriptwriter_optional:
    enable: false
    model: "llama3.1:8b-instruct-q4_K_M"  # example quantized

research:
  policy:
    mode: "reuse"        # default reuse; allow live providers via CLI
    allow_providers: ["local_fixtures"]
    min_citations: 2

audio:
  bitrate: "320k"
  # macOS has good audio codec support
  codec: "aac"

guards:
  disk_free_gb_min: 5
  thermal: "platform_aware"  # no-op on macOS; Pi-only behavior otherwise

# Mac-specific optimizations
mac_optimizations:
  use_metal: true
  use_videotoolbox: true
  memory_pressure_handling: "os_managed"
